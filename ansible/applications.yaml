---
- hosts: all
  tasks:
  - name: install packages
    become: true
    become_method: sudo
    package:
      name: "{{item}}"
      state: present
    loop: "{{lookup('file', '{{playbook_dir}}/files/installed.txt').splitlines() }}"
  - name: install virtualbox host
    become: true
    become_method: sudo
    package: 
      name: "linux{{''.join(ansible_kernel.split('.')[:2])}}-virtualbox-host-modules"
      state: present
  - name: install aur packages
    become: true
    become_method: sudo
    package:
      name: "{{item}}"
      state: present
    loop: "{{lookup('file', '{{playbook_dir}}/files/installed_aur.txt').splitlines() }}"

# if laptop, optimus-qt
